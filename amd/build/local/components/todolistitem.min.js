define("block_todo/local/components/todolistitem",["exports","core/reactive","block_todo/local/todo"],(function(_exports,_reactive,_todo){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;
/**
   * Todo list reactive component.
   *
   * @module     block_todo/local/components/todolistitem
   * @copyright  2023 Mikel Mart√≠n <mikel@moodle.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
class _default extends _reactive.BaseComponent{create(){this.name="todolistitem",this.selectors={TODO:"[data-for='todo']",TODONAME:"[data-for='todo-name']",TODOCHECK:"[data-for='todo-check']",DELETEBUTTON:"[data-action='delete-todo']"},this.classes={DONE:"todo-done"},this.id=this.element.dataset.id}static init(target,selectors){return new this({element:document.querySelector(target),reactive:_todo.todoReactive,selectors:selectors})}stateReady(state){this.addEventListener(this.getElement(this.selectors.DELETEBUTTON),"click",this._deleteTodoListener),this.addEventListener(this.getElement(this.selectors.TODOCHECK),"click",this._toggleTodoListener);const todo=state.todos.get(this.id);this._refreshTodo({element:todo})}getWatchers(){return[{watch:"todos[".concat(this.id,"]:updated"),handler:this._refreshTodo},{watch:"todos[".concat(this.id,"]:deleted"),handler:this.remove}]}_refreshTodo(_ref){var _element$done,_element$done2;let{element:element}=_ref;this.element.classList.toggle(this.classes.DONE,null!==(_element$done=element.done)&&void 0!==_element$done&&_element$done),this.getElement(this.selectors.TODOCHECK).checked=null!==(_element$done2=element.done)&&void 0!==_element$done2&&_element$done2,this.getElement(this.selectors.TODONAME).textContent=element.name}_deleteTodoListener(event){event.preventDefault(),this.reactive.dispatch("deleteTodo",this.getElement().dataset.id)}_toggleTodoListener(){this.reactive.dispatch("toggleTodo",this.getElement().dataset.id)}}return _exports.default=_default,_exports.default}));

//# sourceMappingURL=todolistitem.min.js.map